{% extends 'base.html' %}

{% block title %}Assets{% endblock %}
{% block page_title %}Assets{% endblock %}
{% block page_subtitle %}{{ assets.count }} files uploaded{% endblock %}

{% block content %}
<div class="space-y-6">
    {% if assets %}
    <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
        {% for asset in assets %}
        <div class="glass rounded-xl p-4 group">
            <!-- Preview -->
            <div class="aspect-video bg-white/5 rounded-lg mb-3 overflow-hidden flex items-center justify-center">
                {% if asset.file_type == 'image' %}
                <img src="{{ asset.file.url }}" alt="{{ asset.original_filename }}" class="w-full h-full object-cover">
                {% elif asset.file_type == 'video' %}
                <video src="{{ asset.file.url }}" class="w-full h-full object-cover"></video>
                {% elif asset.file_type == 'pdf' %}
                <span class="text-5xl">ğŸ“„</span>
                {% else %}
                <span class="text-5xl">ğŸ“</span>
                {% endif %}
            </div>

            <!-- Info -->
            <p class="font-medium text-white truncate" title="{{ asset.original_filename }}">
                {{ asset.original_filename }}
            </p>

            {% if asset.deliverable %}
            <p class="text-sm text-gray-400 mt-1 truncate">
                {{ asset.deliverable.event.name }} â†’ {{ asset.deliverable.template.name }}
            </p>
            {% endif %}

            <div class="flex items-center justify-between mt-2 text-xs text-gray-500">
                <span>{{ asset.file_size_display }}</span>
                <span>{{ asset.created_at|date:"M d, H:i" }}</span>
            </div>

            <!-- Actions -->
            <div class="mt-3 flex gap-2">
                <a href="{{ asset.file.url }}" target="_blank" class="flex-1 text-center px-3 py-1.5 bg-white/5 rounded-lg text-sm text-gray-300 
                          hover:bg-white/10 transition">
                    View
                </a>
                {% if asset.deliverable %}
                <a href="{% url 'planning:event_detail' asset.deliverable.event.pk %}" class="flex-1 text-center px-3 py-1.5 bg-primary-500/20 rounded-lg text-sm text-primary-400 
                          hover:bg-primary-500/30 transition">
                    Event
                </a>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="glass rounded-2xl p-8 text-center">
        <div class="w-16 h-16 rounded-2xl bg-primary-500/20 flex items-center justify-center mx-auto mb-4">
            <span class="text-3xl">ğŸ“¦</span>
        </div>

        <h3 class="text-xl font-semibold text-white mb-2">No Assets Yet</h3>
        <p class="text-gray-400 mb-6">
            Upload assets through event deliverable pages.
        </p>

        <a href="{% url 'planning:event_list' %}"
            class="px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg transition inline-block">
            View Events â†’
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}